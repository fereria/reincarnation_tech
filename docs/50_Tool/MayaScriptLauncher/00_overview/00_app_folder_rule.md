# ツールの基本仕様

<!-- SUMMARY:ツールの基本仕様 -->

## 基本機能

GitHub で公開されている Maya のツールや、Gists で公開されている単発のスクリプトを、  
Maya のツールからダウンロードしてインストールできるようにする。  
また、GitHub にあたらしいデータがアップされた場合、  
自動で更新できるようにする。

現在公開中の Shelf 系ツールやメニュー登録系ツールと連携して  
ダウンロードしたものを、好みのランチャーから起動できるようにする。

## 目標

このツールのインストールを含めて、Maya の配布されているスクリプトのインストールを簡単にする。  
かんたんなスクリプトでも用意に共有できるようにして、  
アーティストもツールを手軽に扱えるようにする。  
ツールを配布している開発者の公開も極力やりやすいようにする。

## 配布方法、インストール方法、ランチャー本体の更新方法

Application の本体（↓ のフォルダ構成）と、インストール用の Batch をセットしたものを  
HP 上 or GitHub 上で公開する。

この配布 App 内にあるのは、ランチャー本体をダウンロードするための MaTM_updater  
この updater は、ツール起動時に指定の GitHub のリポジトリを確認し  
ランチャー本体が更新されている場合は自分自身をダウンロード → 展開するようにする。

なので、基本的にはこの MaTM_updater が更新されるタイミング以外は  
ツールのアップデートはオートで実行される（予定）

---

## Application 以下の構造

ツールは、ApplicationPlugins を仕様して構築する。

![](https://gyazo.com/a0a4eec1d08af960c379c36c415a4e26.png)

### config

GitHub で管理予定の、ダウンロードできるツールリストは  
App 起動時に manage_app_list に展開する。  
UI はこのフォルダ以下の内容を表示する。

アーティストが「ダウンロードした」という情報は download_app 内に残す。  
ダウンロードした日時と、URL 等。  
この情報と現在のリポジトリの情報を突き合わせて  
更新が必要な物がないかをチェックできる構造にする。

### python

単発の.py 系のモジュールや、Python のモジュール形式でまとめられているものの  
ファイルを展開する場所。

### scripts

展開された Mel ファイルの配置場所。

### shelves

ランチャーツール用の Shelf ファイルのは位置場所。

### tmp

GitHub からダウンロードする zip や、その zip を展開する場所。  
tmp 下にツール名のサブフォルダを作成し、その下にデータを置く。

GitHub→tmp→ それぞれの配置場所へ。

## ダウンロード可能なツールの登録・管理方法

GitHub に、ツール管理用リポジトリを作成して管理予定。  
細かい仕様は現在策定中。

この管理内で、公開時に指定が必要そうなもの

- 展開方法 (py,mod,app_plugin,mel)
- ツール名
- 説明
- 起動スクリプト
- 展開方法（サブフォルダ以下のどれを展開フォルダにコピーするかの指定）
- Maya の対応バージョン（Option）

## ダウンロードしたツールの展開先

### Gists のツール

python 直下に配置

### .py 単独で公開されているもの

python 直下に配置

### python の Mod でまとめられているもの

python 直下に配置

### ApplicationPlugins でまとめられているもの

AppData/Local/Autodesk/ApplicationPlugins 下に配置  
（ツール本体と並列で配置される形）

### Module

My Documents/maya/modules 下に配置  
予定だけれども、mod 自体でも仕様がバラバラなので .mod で公開されているケース  
の場合は何かしら対処が必要。

## 未調査・考える必要があることメモ

- mod の対応
- インストール方法
- ダウンロード可能な App の管理用リポジトリの仕様
- 本体・アップデータモジュール内の構造
- ツールの名前

## その他、資料置き場

考え途中のメモとか資料データ置き場。  
基本まとめる前、時々カオスる可能性多し。  
https://remi-saba.net:5001/d/f/481880673362124851
